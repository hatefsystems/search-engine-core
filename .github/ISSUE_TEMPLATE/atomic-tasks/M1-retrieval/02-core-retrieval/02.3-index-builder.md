# ðŸŽ¯ Task 02.3: Index Builder

## ðŸ“… Sprint Info
- **Duration:** 5 days
- **Milestone:** M1 - Core Retrieval
- **Priority:** P0 (Critical Path)
- **Depends On:** Tasks 02.1 (BM25), 02.2 (N-gram) âœ…
- **Blocks:** Task 02.4 (Deduplication)
- **Assignee:** TBD

## ðŸŽ¬ What You'll Build
Build universal search index with BM25 and n-gram support using RedisSearch or custom implementation. Handles 100M+ documents.

## ðŸ“‹ Daily Breakdown

### Day 1-2: Index Schema & Setup
- [ ] Design index schema (fields, weights, types)
- [ ] Setup RedisSearch or custom index
- [ ] Implement document ingestion pipeline
- [ ] Add field-specific indexing
- [ ] Initial testing with 1K docs

### Day 3: Dual Indexing (BM25 + N-gram)
- [ ] BM25 index for term-based retrieval
- [ ] N-gram index for fallback
- [ ] Query routing logic
- [ ] Test with mixed queries

### Day 4: Batch Processing
- [ ] Batch indexing from MongoDB
- [ ] Progress tracking and checkpointing
- [ ] Error handling and retry logic
- [ ] Test with 1M docs

### Day 5: Performance & Scale
- [ ] Performance optimization
- [ ] Memory management for large corpus
- [ ] Concurrent indexing
- [ ] Full system test with 10M+ docs

## âœ… Acceptance Criteria
- [ ] Indexes 100M+ documents efficiently
- [ ] Supports BM25 + n-gram dual retrieval
- [ ] Field weights applied correctly
- [ ] Query routing works (BM25 â†’ n-gram fallback)
- [ ] Indexing speed: 10K+ docs/sec
- [ ] Query latency: P95 <80ms for top-200

## ðŸŽ‰ Celebration Criteria
âœ… **Demo:** Index 1M docs and search instantly  
âœ… **Fast:** <80ms P95 retrieval latency  
âœ… **Scale:** Handles 100M+ documents  

**ðŸŽŠ Celebration:** Search works at scale!

## ðŸ“¦ Deliverables
- `src/search/IndexBuilder.cpp` (400 lines)
- `src/search/RetrievalEngine.cpp` (300 lines)
- `include/search/RetrievalEngine.h` (150 lines)
- `src/python/index_builder/` (batch scripts)
- `tests/index_test.cpp` (200+ cases)

## ðŸš€ Next Steps
âž¡ï¸ **Task 02.4: Deduplication** (5 days)

---

**Build a billion-scale index! ðŸ“š**


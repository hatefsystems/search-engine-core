# ðŸŽ¯ Task 01.3: Script-Specific Processing

## ðŸ“… Sprint Info
- **Duration:** 5 days
- **Milestone:** M0 - Foundation
- **Priority:** P0 (Critical Path)
- **Depends On:** Task 01.2 (Language Detection) âœ…
- **Blocks:** Task 01.4 (Stopword IDF Analysis)
- **Assignee:** TBD

## ðŸŽ¬ What You'll Build
Implement script-specific text processing rules for major writing systems: Arabic scripts (ZWNJ handling), CJK (word segmentation), Cyrillic (normalization), and more.

## ðŸ“‹ Daily Breakdown

### Day 1: Arabic Script Processing (Persian, Arabic, Urdu)
- [ ] ZWNJ (Zero-Width Non-Joiner) detection and handling
- [ ] Arabic diacritic normalization
- [ ] Character shape unification (isolated, initial, medial, final)
- [ ] Unit tests for Persian and Arabic text
- [ ] Documentation for Arabic script rules

### Day 2: CJK Processing (Chinese, Japanese, Korean)
- [ ] Implement word boundary detection for CJK
- [ ] Chinese character normalization (Traditional â†” Simplified)
- [ ] Japanese tokenization (Hiragana, Katakana, Kanji)
- [ ] Korean Hangul processing
- [ ] Unit tests for CJK languages

### Day 3: Cyrillic & Latin Scripts
- [ ] Cyrillic variant unification (Russian, Ukrainian, etc.)
- [ ] Latin script diacritic handling (Ã©, Ã±, Ã¼, etc.)
- [ ] Case folding rules per script
- [ ] Special character handling (ligatures, etc.)
- [ ] Unit tests for European languages

### Day 4: Integration & Edge Cases
- [ ] Integrate with language detector (Task 01.2)
- [ ] Mixed-script handling (e.g., English + Persian)
- [ ] Bidirectional text (RTL + LTR mixing)
- [ ] Special cases: URLs, emails, numbers in text
- [ ] Comprehensive integration tests

### Day 5: Performance & Documentation
- [ ] Performance optimization for each script
- [ ] Benchmark: 1000+ docs/sec maintained
- [ ] Complete API documentation
- [ ] Code examples for each script type
- [ ] Code review and final testing

## âœ… Acceptance Criteria
- [ ] ZWNJ handling works correctly for Arabic scripts
- [ ] CJK word segmentation accuracy â‰¥85%
- [ ] Cyrillic variant unification reduces noise by â‰¥40%
- [ ] Mixed-script text processed correctly
- [ ] Performance: Still maintains 1000+ docs/sec
- [ ] Unit test coverage â‰¥85% per script
- [ ] Zero crashes on malformed input

## ðŸ§ª Testing & Validation

### Test Cases by Script

```python
test_cases = {
    "Persian_ZWNJ": "Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ù… vs Ù…ÛŒØ®ÙˆØ§Ù‡Ù…",  # ZWNJ preservation
    "Arabic_diacritics": "Ù…ÙŽØ±Ù’Ø­ÙŽØ¨Ù‹Ø§ â†’ Ù…Ø±Ø­Ø¨Ø§",  # Diacritic removal
    "Chinese_simplified": "å­¸ç¿’ â†’ å­¦ä¹ ",  # Traditional to Simplified
    "Japanese_mixed": "ç§ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒžãƒ¼ã§ã™",  # Kanji + Kana
    "Russian_variants": "Ñ‘Ð»ÐºÐ° â†’ ÐµÐ»ÐºÐ°",  # Cyrillic normalization
    "Mixed_RTL_LTR": "Hello Ø³Ù„Ø§Ù… World"  # Bidirectional text
}
```

### Script-Specific Metrics
- Arabic: ZWNJ preservation rate 100%
- CJK: Segmentation accuracy â‰¥85%
- Cyrillic: Variant reduction â‰¥40%
- Mixed: Correct handling rate 95%

## ðŸŽ‰ Celebration Criteria (Definition of Done)
âœ… **Demo Ready:** Show processing for 5 different scripts  
âœ… **ZWNJ Works:** Persian text correctly handles ZWNJ  
âœ… **CJK Segments:** Chinese/Japanese text properly segmented  
âœ… **Performance:** Maintains 1000+ docs/sec across all scripts  
âœ… **Integration:** Works with Tasks 01.1 and 01.2  

**ðŸŽŠ Celebration Moment:** Demo bidirectional text (English + Persian)!

## ðŸ“¦ Deliverables
- `src/python/text_processor/script_handler.py` (300-400 lines)
- `src/python/text_processor/arabic_processor.py` (150 lines)
- `src/python/text_processor/cjk_processor.py` (200 lines)
- `src/python/text_processor/cyrillic_processor.py` (100 lines)
- `tests/test_script_processing.py` (200+ test cases)
- `docs/ALGORITHMS.md` (Technical details & algorithms)
- `docs/api/script-processing.md` (API documentation)

## ðŸ”— Dependencies & Integration

### Input (from Task 01.2)
```python
normalized_text: str
language_info: LanguageInfo  # Includes script_code
```

### Output
```python
class ProcessedText:
    text: str                    # Script-processed text
    original: str                # Original text
    script_code: str            # ISO 15924 script
    applied_rules: List[str]    # Processing rules applied
    word_boundaries: List[int]  # For CJK (optional)
```

## ðŸš€ Next Steps
âž¡ï¸ **Task 01.4: Stopword IDF Analysis** (5 days)  
- Will use your processed text for corpus analysis
- Depends on clean, script-normalized text

## ðŸ’¡ Tips & Resources

### Common Pitfalls
- âš ï¸ **ZWNJ:** Don't remove in Persian! It's grammatically significant
- âš ï¸ **CJK:** Word segmentation is language-specific (CNâ‰ JPâ‰ KR)
- âš ï¸ **Bidirectional:** Use Unicode BiDi algorithm, don't roll your own
- âš ï¸ **Ligatures:** Some are semantic (Ã¦ in Danish), others aren't

### Helpful Resources
- [Unicode BiDi Algorithm](https://unicode.org/reports/tr9/)
- [CJK Word Segmentation](https://github.com/fxsjy/jieba)
- [Arabic ZWNJ Rules](https://www.unicode.org/L2/L2018/18107-zwnj-persian.pdf)
- [ICU Transliteration](https://unicode-org.github.io/icu/userguide/transforms/)

### Example Code
```python
def process_by_script(text: str, script: str) -> ProcessedText:
    """Apply script-specific processing rules"""
    
    if script == "Arab":  # Arabic/Persian
        # Preserve ZWNJ
        text = preserve_zwnj(text)
        # Remove diacritics
        text = remove_arabic_diacritics(text)
    
    elif script in ["Hani", "Hira", "Kana"]:  # CJK
        # Word segmentation
        words = segment_cjk(text, language)
        text = " ".join(words)
    
    elif script == "Cyrl":  # Cyrillic
        # Variant unification
        text = unify_cyrillic_variants(text)
    
    return ProcessedText(text=text, script_code=script)
```

## ðŸ“Š Success Metrics
- **Correctness:** Script rules applied accurately
- **Performance:** No degradation (<1000 docs/sec)
- **Coverage:** Supports 5+ major script families
- **Quality:** Reduces token noise by â‰¥30%

## ðŸŽ“ Learning Outcomes
After completing this task, you will:
- âœ… Understand Unicode script systems
- âœ… Handle bidirectional text correctly
- âœ… Implement CJK word segmentation
- âœ… Master ZWNJ and special character handling

## ðŸŒ Supported Scripts Priority
1. **Arab** (Persian, Arabic, Urdu) - P0
2. **Hani/Hira/Kana** (Chinese, Japanese) - P0
3. **Cyrl** (Russian, Ukrainian) - P1
4. **Latn** (English, French, German) - P1
5. **Hang** (Korean) - P2

---

**Let's handle every script in the world! ðŸ“**

